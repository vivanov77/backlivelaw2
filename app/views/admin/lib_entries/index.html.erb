<h1>Правовые статьи</h1>

<table>
  <thead>
    <tr>
      <th>Заголовок</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @lib_entries.each do |lib_entry| %>
      <tr style="background-color:#9cce6e;">
        <td><%= lib_entry.id %></td>      
        <td><%= lib_entry.title %></td>
        <td><%= link_to 'Показать', [:admin, lib_entry] %></td>
        <td><%= link_to 'Редактировать', edit_admin_lib_entry_path(lib_entry) %></td>
        <td><%= link_to 'Удалить', [:admin, lib_entry], method: :delete, data: { confirm: 'Вы уверены?' } %></td>
        <td><%= link_to 'Создать дочернюю', new_admin_lib_entry_lib_entry_path(lib_entry.id) %></td>

        <% if lib_entry.lib_entries.size > 0 %>
          <td><%= link_to 'Показать детей', admin_lib_entry_lib_entries_path(lib_entry.id) %></td>
        <% end %>        
      </tr>

      <% if lib_entry.lib_entries.size > 0 %>

        <% lib_entry.lib_entries.each do |lib_entry2| %>
          <tr style="background-color:#e5f2d9;">
            <td>&nbsp;`--------&gt;</td>
            <td><%= lib_entry2.id %></td>
            <td><%= lib_entry2.title %></td>
            <td><%= link_to 'Показать', [:admin, lib_entry2] %></td>
            <td><%= link_to 'Редактировать', edit_admin_lib_entry_path(lib_entry2) %></td>
            <td><%= link_to 'Удалить', [:admin, lib_entry2], method: :delete, data: { confirm: 'Вы уверены?' } %>              
            </td>
            <td><%= link_to 'Создать дочернюю', new_admin_lib_entry_lib_entry_path(lib_entry2.id) %></td>            
            <% if lib_entry2.lib_entries.size > 0 %>
              <td><%= link_to 'Показать детей', admin_lib_entry_lib_entries_path(lib_entry2.id) %></td>
            <% end %>
          </tr>


            <% if lib_entry2.lib_entries.size > 0 %>

              <% lib_entry2.lib_entries.each do |lib_entry3| %>
                <tr>
                <td></td>
                  <td>&nbsp;`--------&gt;</td>
                  <td><%= lib_entry3.id %></td>
                  <td><%= lib_entry3.title %></td>
                  <td><%= link_to 'Показать', [:admin, lib_entry3] %></td>
                  <td><%= link_to 'Редактировать', edit_admin_lib_entry_path(lib_entry3) %></td>
                  <td><%= link_to 'Удалить', [:admin, lib_entry3], method: :delete, data: { confirm: 'Вы уверены?' } %>              
                  </td>
                </tr>
              <% end %>
            <% end %> <!-- if lib_entry.lib_entries.size > 0 -->


        <% end %>
      <% end %> <!-- if lib_entry.lib_entries.size > 0 -->

    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'Новая правовая статья', new_admin_lib_entry_path %>